import React, { useState, useEffect } from 'react';
import './Navbar.css';

// Import your images here
// For example:
// import logo from './assets/logo123.png';
// import wishlistIcon from './assets/wishlist.svg';
// import cartIcon from './assets/shopping-bag.svg';
// import hamburgerIcon from './assets/hamburger.png';

const Navbar = () => {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [activeSubmenu, setActiveSubmenu] = useState(null);
  const [cartCount, setCartCount] = useState(0);

  // Load cart count from localStorage or API on component mount
  useEffect(() => {
    // Example: loading from localStorage
    const savedCartCount = localStorage.getItem('cartCount');
    if (savedCartCount) {
      setCartCount(parseInt(savedCartCount));
    }
  }, []);

  const toggleMobileMenu = () => {
    setMobileMenuOpen(!mobileMenuOpen);
  };

  const toggleSubmenu = (menu) => {
    setActiveSubmenu(activeSubmenu === menu ? null : menu);
  };

  // Navigation data structure
  const navData = {
    latest: {
      title: "Latest",
      columns: [
        {
          sections: [
            {
              title: "Tops",
              items: [
                { name: "Shirt", link: "/latest/shirt" },
                { name: "T-Shirt", link: "/latest/t-shirt" },
                { name: "Polo T-shirt", link: "/latest/polo" }
              ]
            },
            {
              title: "Bottoms",
              items: [
                { name: "Pants", link: "/latest/pants" },
                { name: "Formal Pants", link: "/latest/formal-pants" },
                { name: "Denim jeans", link: "/latest/denim-jeans" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "",
              items: [
                { name: "Trousers", link: "/latest/trousers" },
                { name: "Joggers", link: "/latest/joggers" },
                { name: "Shorts", link: "/latest/shorts" }
              ]
            }
          ]
        }
      ]
    },
    women: {
      title: "Women",
      columns: [
        {
          sections: [
            {
              title: "Tops",
              items: [
                { name: "Shirt", link: "/women/shirts" },
                { name: "T-Shirt", link: "/women/t-shirts" },
                { name: "Tank Top", link: "/women/tank-tops" },
                { name: "Crop Top", link: "/women/crop-top" },
                { name: "Body Suit", link: "/women/body-suit" },
                { name: "Kurti", link: "/women/kurti" }
              ]
            },
            {
              title: "Bottoms",
              items: [
                { name: "Pants", link: "/women/pants" },
                { name: "Denim jeans", link: "/women/denim-jeans" },
                { name: "Trousers", link: "/women/trousers" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "",
              items: [
                { name: "Shorts", link: "/women/shorts" },
                { name: "Pajamas", link: "/women/pajamas" },
                { name: "Skirt", link: "/women/skirt" },
                { name: "Leggings", link: "/women/leggings" }
              ]
            },
            {
              title: "Full Set",
              items: [
                { name: "Jump Suit", link: "/women/jump-suit" },
                { name: "CO-Sets", link: "/women/co-sets" }
              ]
            },
            {
              title: "Dresses",
              items: [
                { name: "Mini Dress", link: "/women/mini-dress" },
                { name: "Midi Dress", link: "/women/midi-dress" },
                { name: "Maxi Dress", link: "/women/maxi-dress" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "",
              items: [
                { name: "Floral Dress", link: "/women/floral-dress" },
                { name: "Petite Dress", link: "/women/petite-dress" }
              ]
            },
            {
              title: "Winters",
              items: [
                { name: "Coats", link: "/women/coats" },
                { name: "Hoodies", link: "/women/hoodies" },
                { name: "Jackets", link: "/women/jackets" },
                { name: "Sweaters", link: "/women/sweaters" },
                { name: "High Neck", link: "/women/high-neck" },
                { name: "Caps", link: "/women/caps" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "Accessories",
              items: [
                { name: "Hand bags", link: "/women/hand-bags" },
                { name: "Sunglasses", link: "/women/sunglasses" },
                { name: "Belts", link: "/women/belts" }
              ]
            }
          ]
        }
      ]
    },
    men: {
      title: "Men",
      columns: [
        {
          sections: [
            {
              title: "Upper",
              items: [
                { name: "Shirt", link: "/men/shirt" },
                { name: "T-Shirt", link: "/men/t-shirt" },
                { name: "Polo T-shirt", link: "/men/polo" }
              ]
            },
            {
              title: "Bottoms",
              items: [
                { name: "Pants", link: "/men/pants" },
                { name: "Formal Pants", link: "/men/formal-pants" },
                { name: "Denim jeans", link: "/men/denim-jeans" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "",
              items: [
                { name: "Trousers", link: "/men/trousers" },
                { name: "Joggers", link: "/men/joggers" },
                { name: "Shorts", link: "/men/shorts" }
              ]
            },
            {
              title: "Winters",
              items: [
                { name: "Hoodies", link: "/men/hoodies" },
                { name: "Sweatshirts", link: "/men/sweatshirts" },
                { name: "Jackets", link: "/men/jackets" },
                { name: "Sweaters", link: "/men/sweaters" }
              ]
            }
          ]
        },
        {
          sections: [
            {
              title: "",
              items: [
                { name: "High Neck", link: "/men/high-neck" },
                { name: "Caps", link: "/men/caps" }
              ]
            },
            {
              title: "Accessories",
              items: [
                { name: "Sunglasses", link: "/men/sunglasses" },
                { name: "Belts", link: "/men/belts" },
                { name: "Tie", link: "/men/tie" },
                { name: "Bags", link: "/men/bags" },
                { name: "Side-bags", link: "/men/side-bags" }
              ]
            }
          ]
        }
      ]
    },
    shoes: {
      title: "Shoes",
      columns: []  // You can add shoe categories here
    }
  };

  return (
    <nav className="navbar">
      <div className="nav-container">
        {/* Logo */}
        <div className="nav-logo">
          {/* Replace with your actual image path */}
          <img src="/PHotos/index/LOGO123.png" alt="Brand Logo" />
        </div>

        {/* Desktop Navigation */}
        <div className="nav-content">
          <div className="nav-item">
            <a href="/">Home</a>
          </div>
          
          {/* Generate navigation items dynamically */}
          {Object.keys(navData).map((key) => (
            <div 
              key={key}
              className="nav-item" 
              onMouseEnter={() => setActiveSubmenu(key)}
              onMouseLeave={() => setActiveSubmenu(null)}
            >
              <a href={`/${key}`}>{navData[key].title}</a>
              
              {/* Dropdown Menu */}
              {activeSubmenu === key && (
                <div className={`dropdown-menu ${key}-dropdown`}>
                  {navData[key].columns.map((column, colIndex) => (
                    <div key={colIndex} className="dropdown-column">
                      {column.sections.map((section, secIndex) => (
                        <div key={secIndex} className="category">
                          {section.title && <h3>{section.title}</h3>}
                          {section.items.map((item, itemIndex) => (
                            <div key={itemIndex} className="nav-link-item">
                              <a href={item.link}>{item.name}</a>
                            </div>
                          ))}
                        </div>
                      ))}
                    </div>
                  ))}
                  
                  {/* Ad space for dropdown */}
                  <div className="dropdown-ad">
                    <div className={`nav-${key}-ad`}></div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>

        {/* User Tools (Wishlist, Cart) */}
        <div className="nav-user-tools">
          <div className="user-tool-item">
            <a href="/wishlist">
              {/* Replace with your actual image path */}
              <img src="/PHotos/wishlist.svg" alt="Wishlist" />
            </a>
          </div>
          <div className="user-tool-item">
            <a href="/cart">
              {/* Replace with your actual image path */}
              <img src="/PHotos/reshot-icon-shopping-bag-XE3TU26KGZ.svg" alt="Shopping Cart" />
              <span className="cart-count">{cartCount}</span>
            </a>
          </div>
        </div>

        {/* Mobile Menu Hamburger */}
        <div className="hamburger" onClick={toggleMobileMenu}>
          {/* Replace with your actual image path */}
          <img src="/path-to-hamburger-icon.png" alt="Menu" />
        </div>
      </div>

      {/* Mobile Navigation */}
      {mobileMenuOpen && (
        <div className="mobile-menu">
          <div className="mobile-menu-header">
            <div className="brand-logo">
              {/* Replace with your actual image path */}
              <img src="/path-to-your-logo.png" alt="Brand Logo" />
            </div>
            <div className="close-button" onClick={toggleMobileMenu}>
              <h1>×</h1>
            </div>
          </div>

          <div className="mobile-menu-item">
            <a href="/">Home</a>
          </div>

          {/* Generate mobile menu items dynamically */}
          {Object.keys(navData).map((key) => (
            <div key={key} className="mobile-menu-section">
              <div 
                className="mobile-menu-item" 
                onClick={() => toggleSubmenu(key)}
              >
                <h2>{navData[key].title}</h2>
                <h3>{activeSubmenu === key ? '˄' : '˂'}</h3>
              </div>
              
              {activeSubmenu === key && (
                <div className="mobile-submenu">
                  {navData[key].columns.map((column, colIndex) => (
                    <div key={colIndex} className="mobile-column">
                      {column.sections.map((section, secIndex) => (
                        <div key={secIndex}>
                          {section.title && (
                            <div className="mobile-category-title">
                              <h3>{section.title}</h3>
                            </div>
                          )}
                          {section.items.map((item, itemIndex) => (
                            <div key={itemIndex} className="mobile-link-item">
                              <a href={item.link}>{item.name}</a>
                            </div>
                          ))}
                        </div>
                      ))}
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      )}
    </nav>
  );
};

export default Navbar;
